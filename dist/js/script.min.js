"use strict";function geodGBL(){var e;"undefined"==(e=void 0===EARTH_A?"undefined":_typeof(EARTH_A))&&wgs84()}function earthcon(e,t){var a,n,r,i,s;i=Number(e),s=Number(t),a=1-s/i,r=1-s*s/(i*i),n=Math.sqrt(r),EARTH_A=i,EARTH_B=s,EARTH_F=a,EARTH_Ecc=n,EARTH_Esq=r}function wgs84(){var e,t,a;e=6378.137,a=1/298.257223563,t=e*(1-a),earthcon(e,t)}function radcur(e){var t,a,n,r,i,s,o,u,l,c,h,p,f,m,d,v,b=new Array(3),y=Math.PI/180;return geodGBL(),t=EARTH_A,a=EARTH_B,r=t*t,i=a*a,s=1-i/r,Math.sqrt(s),n=Number(e),o=Math.cos(y*n),u=Math.sin(y*n),l=1-s*u*u,c=Math.sqrt(l),h=t/c,p=h*(1-s)/l,f=h*o,v=(1-s)*h*u,m=f*f+v*v,d=Math.sqrt(m),b[0]=d,b[1]=h,b[2]=p,b}function rearth(e){var t,a;return a=Number(e),t=radcur(a),t[0]}function gc2gd(e,t){var a,n,r,i,s,o,u,l,c,h=Math.PI/180,p=1/h,f=new Array(3);return geodGBL(),n=Number(e),r=Number(t),s=EARTH_Ecc,o=s*s,l=r,f=radcur(n),i=f[1],c=1-o*i/(i+l),u=Math.tan(h*n)/c,a=p*Math.atan(u),f=radcur(a),i=f[1],c=1-o*i/(i+l),u=Math.tan(h*n)/c,a=p*Math.atan(u)}function gd2gc(e,t){var a,n,r,i,s,o,u,l,c=Math.PI/180,h=1/c,p=new Array(3);return geodGBL(),a=Number(e),n=Number(t),i=EARTH_Ecc,s=i*i,u=n,p=radcur(a),r=p[1],l=1-s*r/(r+u),o=Math.tan(c*a)*l,h*Math.atan(o)}function llenu(e,t){var a,n,r,i,s,o,u,l=new Array(3),c=new Array(3),h=new Array(3),p=new Array(3),r=Math.PI/180;return a=Number(e),n=Number(t),i=Math.cos(r*a),s=Math.sin(r*a),o=Math.cos(r*n),u=Math.sin(r*n),l[0]=-u,l[1]=o,l[2]=0,c[0]=-o*s,c[1]=-u*s,c[2]=i,h[0]=o*i,h[1]=u*i,h[2]=s,p[0]=l,p[1]=c,p[2]=h,p}function xyzllh(e){var t,a,n,r,i,s,o,u,l,c,h,p,f,m,d,v,b,y,g,A=Math.PI/180,E=new Array(3),M=new Array(3);if(geodGBL(),m=EARTH_Esq,s=e[0],o=e[1],u=e[2],s=Number(s),o=Number(o),u=Number(u),i=Math.sqrt(s*s+o*o+u*u),t=Math.asin(u/i)/A,h=Math.abs(s)+Math.abs(o),y=h<1e-10?0:Math.atan2(o,s)/A,y<0&&(y+=360),(l=Math.sqrt(s*s+o*o))<1e-10)return b=90,u<0&&(b=-90),g=i-rearth(b),M[0]=b,M[1]=y,M[2]=g,M;r=rearth(t),g=i-r,b=gc2gd(t,g),E=radcur(b),f=E[1];for(var p=0;p<5&&(v=Math.sin(A*b),c=(u+f*m*v)/l,a=Math.atan(c)/A,n=a-b,b=a,d=Math.cos(A*b),E=radcur(b),f=E[1],g=l/d-f,!(Math.abs(n)<1e-12));p++);return M[0]=b,M[1]=y,M[2]=g,M}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function filter_date(e){for(var t=0;t<satellites.length;t++){var a=new Date(satellites[t].date),a=a.getFullYear();e[0]>a||e[1]<a?satellites[t].object.show=!1:satellites[t].object.show=!0}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EARTH_A,EARTH_B,EARTH_F,EARTH_Ecc,EARTH_Esq,_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),viewer=new Cesium.Viewer("cesiumContainer",{fullscreenButton:!1,baseLayerPicker:!1,timeline:!1,homeButton:!1,infoBoxe:!1,navigationHelpButton:!1,selectionIndicator:!1,vrButton:!1,geocoder:!1,sceneModePicker:!1,animation:!1});document.querySelector(".cesium-viewer-bottom").style.display="none";for(var sat=function(){function e(t,a,n,r,i){_classCallCheck(this,e);var s=this;this.name=t,this.date=n,this.id=a,this.true_pos=i,this.pos=xyzllh(i),this.infos=r,this.object=new Cesium.Entity({id:this.id,name:this.name,position:new Cesium.Cartesian3.fromDegrees(this.pos[0],this.pos[1],1e3*this.pos[2]),ellipsoid:{radii:new Cesium.Cartesian3(5e4,5e4,5e4),material:Cesium.Color.RED},label:{text:this.name,font:"10pt arial",style:Cesium.LabelStyle.FILL_AND_OUTLINE,outlineWidth:2,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-25)}}),this.popup=new Cesium.Entity(s.name),this.popup={title:""},this.popup.description={getValue:function(){return'<div class="pop_up"><div class="exit"></div><h2>'+s.name+"</h2><p>Lauched : "+s.date+"</p><p> Country : "+s.infos.country+"</p><p> Function : "+s.infos.discipline+"</p><p> Mass : "+s.infos.mass+"</p><p>Description : "+s.infos.description+"</p></div>"}},this.create()}return _createClass(e,[{key:"create",value:function(){viewer.entities.add(this.object)}}]),e}(),satellites=[],i=0;i<sats.length;i++)satellites.push(new sat(sats[i].name,sats[i].id,sats[i].date,sats[i].infos,sats[i].pos));console.log(satellites);var handler=new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);handler.setInputAction(function(e){for(var t=viewer.scene.pick(e.position),a=0;a<satellites.length;a++)Cesium.defined(t)&&t.id==satellites[a].object&&(viewer.selectedEntity=satellites[a].popup)},Cesium.ScreenSpaceEventType.LEFT_CLICK);var parent=document.querySelector(".range-slider"),rangeS=parent.querySelectorAll("input[type=range]"),numberS=parent.querySelectorAll("input[type=number]");rangeS.forEach(function(e){e.oninput=function(){var e=parseFloat(rangeS[0].value),t=parseFloat(rangeS[1].value);if(e>t){var a=[t,e];e=a[0],t=a[1]}numberS[0].value=e,numberS[1].value=t,filter_date([numberS[0].value,numberS[1].value])}}),numberS.forEach(function(e){e.oninput=function(){var e=parseFloat(numberS[0].value),t=parseFloat(numberS[1].value);if(e>t){var a=e;numberS[0].value=t,numberS[1].value=a}rangeS[0].value=e,rangeS[1].value=t,filter_date([rangeS[0].value,rangeS[1].value])}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnZlcnRlci5qcyIsInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJnZW9kR0JMIiwidHN0Z2xvYmFsIiwiRUFSVEhfQSIsIl90eXBlb2YiLCJ3Z3M4NCIsImVhcnRoY29uIiwiYWkiLCJiaSIsImYiLCJlY2MiLCJlY2NzcSIsImEiLCJiIiwiTnVtYmVyIiwiTWF0aCIsInNxcnQiLCJFQVJUSF9CIiwiRUFSVEhfRiIsIkVBUlRIX0VjYyIsIkVBUlRIX0VzcSIsIndnczg0YSIsIndnczg0YiIsIndnczg0ZiIsInJhZGN1ciIsImxhdGkiLCJsYXQiLCJhc3EiLCJic3EiLCJjbGF0Iiwic2xhdCIsImRzcSIsImQiLCJybiIsInJtIiwicmhvIiwicnNxIiwiciIsInoiLCJycm5ybSIsIkFycmF5IiwiZHRyIiwiUEkiLCJjb3MiLCJzaW4iLCJyZWFydGgiLCJnYzJnZCIsImZsYXRnY2kiLCJhbHRrbWkiLCJmbGF0Z2QiLCJmbGF0Z2MiLCJhbHRrbSIsImVzcSIsInRsYXQiLCJhbHRub3ciLCJyYXRpbyIsInJ0ZCIsInRhbiIsImF0YW4iLCJnZDJnYyIsImZsYXRnZGkiLCJsbGVudSIsImZsYXRpIiwiZmxvbmkiLCJmbGF0IiwiZmxvbiIsImNsb24iLCJzbG9uIiwiZWUiLCJlbiIsImV1IiwiZW51IiwieHl6bGxoIiwieHZlYyIsImZsYXRuIiwiZGxhdCIsInJub3ciLCJycCIsIngiLCJ5IiwicCIsInRhbmdkIiwidGVzdHZhbCIsImtvdW50IiwibGxodmVjIiwiYXNpbiIsImFicyIsImF0YW4yIiwiZmlsdGVyX2RhdGUiLCJkYXRlcyIsImkiLCJzYXRlbGxpdGVzIiwibGVuZ3RoIiwic2F0X2RhdGUiLCJEYXRlIiwiZGF0ZSIsImdldEZ1bGxZZWFyIiwib2JqZWN0Iiwic2hvdyIsInZpZXdlciIsIkNlc2l1bSIsIlZpZXdlciIsImZ1bGxzY3JlZW5CdXR0b24iLCJiYXNlTGF5ZXJQaWNrZXIiLCJ0aW1lbGluZSIsImhvbWVCdXR0b24iLCJpbmZvQm94ZSIsIm5hdmlnYXRpb25IZWxwQnV0dG9uIiwic2VsZWN0aW9uSW5kaWNhdG9yIiwidnJCdXR0b24iLCJnZW9jb2RlciIsInNjZW5lTW9kZVBpY2tlciIsImFuaW1hdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsInNhdCIsIm5hbWUiLCJpZCIsImluZm9zIiwicG9zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInRoYXQiLCJ0cnVlX3BvcyIsIkVudGl0eSIsInBvc2l0aW9uIiwiQ2FydGVzaWFuMyIsImZyb21EZWdyZWVzIiwiZWxsaXBzb2lkIiwicmFkaWkiLCJtYXRlcmlhbCIsIkNvbG9yIiwiUkVEIiwibGFiZWwiLCJ0ZXh0IiwiZm9udCIsIkxhYmVsU3R5bGUiLCJGSUxMX0FORF9PVVRMSU5FIiwib3V0bGluZVdpZHRoIiwidmVydGljYWxPcmlnaW4iLCJWZXJ0aWNhbE9yaWdpbiIsIkJPVFRPTSIsInBpeGVsT2Zmc2V0IiwiQ2FydGVzaWFuMiIsInBvcHVwIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImdldFZhbHVlIiwiY291bnRyeSIsImRpc2NpcGxpbmUiLCJtYXNzIiwiY3JlYXRlIiwiZW50aXRpZXMiLCJhZGQiLCJzYXRzIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJoYW5kbGVyIiwiU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIiLCJzY2VuZSIsImNhbnZhcyIsInNldElucHV0QWN0aW9uIiwiY2xpY2siLCJwaWNrZWRPYmplY3QiLCJwaWNrIiwiZGVmaW5lZCIsInNlbGVjdGVkRW50aXR5IiwiU2NyZWVuU3BhY2VFdmVudFR5cGUiLCJMRUZUX0NMSUNLIiwicGFyZW50IiwicmFuZ2VTIiwicXVlcnlTZWxlY3RvckFsbCIsIm51bWJlclMiLCJmb3JFYWNoIiwiZWwiLCJvbmlucHV0Iiwic2xpZGUxIiwicGFyc2VGbG9hdCIsInZhbHVlIiwic2xpZGUyIiwiX3JlZiIsIm51bWJlcjEiLCJudW1iZXIyIiwidG1wIl0sIm1hcHBpbmdzIjoiWUFrQkEsU0FBU0Es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QUlDLEdBQU1GLENBQ1ZULFNBQVEsR0FBR00sTUFBUUksRUFDbkJWLFFBQVEsR0FBR00sTUFBUUssRUFHckJiLE9BQU8sR0FBR1EsTUFBUUcsRUFDbEJYLE9BQU8sR0FBR1EsTUFBUUksRUFFbEJqRyxhQUFhcUYsT0FBTyxHQUFHUSxNQUFPUixPQUFPLEdBQUdRIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAgICAgICAgICAgICBnZW9kZXN5IHJvdXRpbmVzIGluIEphdmFTY3JpcHRcbiAgICAgICAgICAgICAgICAgSmFtZXMgUi4gQ2x5bmNoIE5QUyAvIDIwMDNcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgIERvbmUgZm9yIHN1cHBvcnQgb2Ygd2ViIGVkdWNhdGlvbiBwYWdlc1xuXG5cbiAgICAgICAgICA9PSBtdXN0IGNvbnZlcnQgaW5wdXRzIHRvIG51bWJlcnMgZm9yIHNhZmV0eSA9PVxuICAgICAgICAgID09IGlmIHN0cmluZyBjb21lcyBpbiAtIHNvbWV0aW1lcyB3b3Jrcywgc29tZXRpbWVzIG5vdCAhPT1cbiovXG5cbnZhciBFQVJUSF9BO1xudmFyIEVBUlRIX0I7XG52YXIgRUFSVEhfRjtcbnZhciBFQVJUSF9FY2M7XG52YXIgRUFSVEhfRXNxO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBnZW9kR0JMKClcblxuLy8gICAgICAgICAgICAgdGVzdCBhbmQgZW5zdXJlIGdlb2Rlc3kgZ2xvYmFscyBsb2FkZWRcbntcblxuICB2YXIgdHN0Z2xvYmFsXG5cbiAgdHN0Z2xvYmFsID0gdHlwZW9mIEVBUlRIX0E7XG4gIGlmICh0c3RnbG9iYWwgPT0gXCJ1bmRlZmluZWRcIikgd2dzODQoKVxuXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIGVhcnRoY29uKGFpLCBiaSlcblxuLyogICAgICAgIFNldHMgRWFydGggQ29uc3RhbnRzIGFzIGdsb2JhbHNcbiAgICAgICAgICAgICAtLSAgaW5wdXQgYSxiXG4gICAgICAgICAgICAgLS0gIExlYXZlcyBHbG9iYWxzIFxuICAgICAgICAgICAgICAgICBFQVJUSF9BICAgICAgRUFSVEhfQiAgIEVBUlRIX0YgIEVBUlRIX0VjY1xuKi9cblxue1xuICB2YXIgZiwgZWNjLCBlY2NzcSwgYSwgYlxuXG4gIGEgPSBOdW1iZXIoYWkpO1xuICBiID0gTnVtYmVyKGJpKTtcblxuICBmID0gMSAtIGIgLyBhO1xuICBlY2NzcSA9IDEgLSBiICogYiAvIChhICogYSk7XG4gIGVjYyA9IE1hdGguc3FydChlY2NzcSk7XG5cbiAgRUFSVEhfQSA9IGE7XG4gIEVBUlRIX0IgPSBiO1xuICBFQVJUSF9GID0gZjtcbiAgRUFSVEhfRWNjID0gZWNjO1xuICBFQVJUSF9Fc3EgPSBlY2NzcTtcbn1cblxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiB3Z3M4NCgpXG5cbi8qICAgICAgICBXR1M4NCBFYXJ0aCBDb25zdGFudHNcbiAgICAgICAgICAgICAtLSAgcmV0dXJucyBhLGIsZixlICAtLVxuICAgICAgICAgICAgIC0tICBMZWF2ZXMgR2xvYmFscyBcbiAgICAgICAgICAgICAgICAgRUFSVEhfQSAgICAgIEVBUlRIX0IgICBFQVJUSF9GICBFQVJUSF9FY2NcblxuKi9cblxue1xuICB2YXIgd2dzODRhLCB3Z3M4NGIsIHdnczg0ZlxuXG4gIHdnczg0YSA9IDYzNzguMTM3O1xuICB3Z3M4NGYgPSAxLjAgLyAyOTguMjU3MjIzNTYzO1xuICB3Z3M4NGIgPSB3Z3M4NGEgKiAoMS4wIC0gd2dzODRmKTtcblxuICBlYXJ0aGNvbih3Z3M4NGEsIHdnczg0Yik7XG5cbn1cblxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiByYWRjdXIobGF0aSlcblxuLypcbiAgICAgICBjb21wdXRlIHRoZSByYWRpaSBhdCB0aGUgZ2VvZGV0aWMgbGF0aXR1ZGUgbGF0IChpbiBkZWdyZWVzKVxuICAgICBcbiAgICAgaW5wdXQ6XG4gICAgICAgICAgICAgICBsYXQgICAgICAgZ2VvZGV0aWMgbGF0aXR1ZGUgaW4gZGVncmVlc1xuICAgICBvdXRwdXQ6ICAgXG4gICAgICAgICAgICAgICBycm5ybSAgICAgYW4gYXJyYXkgMyBsb25nXG4gICAgICAgICAgICAgICAgICAgICAgICAgciwgIHJuLCAgcm0gICBpbiBrbVxuXG4qL1xuXG57XG5cbiAgdmFyIHJybnJtID0gbmV3IEFycmF5KDMpXG5cbiAgdmFyIGR0ciA9IE1hdGguUEkgLyAxODAuMFxuXG4gIHZhciBhLCBiLCBsYXRcbiAgdmFyIGFzcSwgYnNxLCBlY2NzcSwgZWNjLCBjbGF0LCBzbGF0XG4gIHZhciBkc3EsIGQsIHJuLCBybSwgcmhvLCByc3EsIHIsIHpcblxuICAvLyAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGdlb2RHQkwoKTtcblxuICBhID0gRUFSVEhfQTtcbiAgYiA9IEVBUlRIX0I7XG5cbiAgYXNxID0gYSAqIGE7XG4gIGJzcSA9IGIgKiBiO1xuICBlY2NzcSA9IDEgLSBic3EgLyBhc3E7XG4gIGVjYyA9IE1hdGguc3FydChlY2NzcSk7XG5cbiAgbGF0ID0gTnVtYmVyKGxhdGkpO1xuXG4gIGNsYXQgPSBNYXRoLmNvcyhkdHIgKiBsYXQpO1xuICBzbGF0ID0gTWF0aC5zaW4oZHRyICogbGF0KTtcblxuICBkc3EgPSAxLjAgLSBlY2NzcSAqIHNsYXQgKiBzbGF0O1xuICBkID0gTWF0aC5zcXJ0KGRzcSk7XG5cbiAgcm4gPSBhIC8gZDtcbiAgcm0gPSBybiAqICgxLjAgLSBlY2NzcSkgLyBkc3E7XG5cbiAgcmhvID0gcm4gKiBjbGF0O1xuICB6ID0gKDEuMCAtIGVjY3NxKSAqIHJuICogc2xhdDtcbiAgcnNxID0gcmhvICogcmhvICsgeiAqIHo7XG4gIHIgPSBNYXRoLnNxcnQocnNxKTtcblxuICBycm5ybVswXSA9IHI7XG4gIHJybnJtWzFdID0gcm47XG4gIHJybnJtWzJdID0gcm07XG5cbiAgcmV0dXJuIChycm5ybSk7XG5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gICAgICAgIHBoeXNpY2FsIHJhZGl1cyBvZiBlYXJ0aCBmcm9tIGdlb2RldGljIGxhdGl0dWRlXG5cbmZ1bmN0aW9uIHJlYXJ0aChsYXRpKSB7XG4gIHZhciBycm5ybSwgciwgbGF0XG5cbiAgbGF0ID0gTnVtYmVyKGxhdGkpO1xuXG4gIHJybnJtID0gcmFkY3VyKGxhdCk7XG4gIHIgPSBycm5ybVswXTtcblxuICByZXR1cm4gKHIpO1xuXG59XG5cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZnVuY3Rpb24gZ2MyZ2QoZmxhdGdjaSwgYWx0a21pKVxuXG4vKiAgICAgICAgZ2VvY2VudHJpYyBsYXRpdHVkZSB0byBnZW9kZXRpYyBsYXRpdHVkZVxuXG4gICAgIElucHV0OlxuICAgICAgICAgICAgICAgZmxhdGdjICAgIGdlb2NlbnRyaWMgbGF0aXR1ZGUgZGVnLlxuICAgICAgICAgICAgICAgYWx0a20gICAgIGFsdGl0aWRlIGluIGttXG4gICAgIG91cHV0OlxuICAgICAgICAgICAgICAgZmxhdGdkICAgIGdlb2RldGljIGxhdGl0dWRlIGluIGRlZ1xuXG4qL1xuXG57XG5cbiAgdmFyIGR0ciA9IE1hdGguUEkgLyAxODAuMDtcbiAgdmFyIHJ0ZCA9IDEgLyBkdHI7XG5cbiAgdmFyIGZsYXRnZCwgZmxhdGdjLCBhbHRrbVxuICB2YXIgcnJucm0gPSBuZXcgQXJyYXkoMylcbiAgdmFyIHJlLCBybiwgZWNjLCBlc3E7XG4gIHZhciBzbGF0LCBjbGF0LCB0bGF0XG4gIHZhciBhbHRub3csIHJhdGlvXG5cbiAgZ2VvZEdCTCgpO1xuXG4gIGZsYXRnYyA9IE51bWJlcihmbGF0Z2NpKTtcbiAgYWx0a20gPSBOdW1iZXIoYWx0a21pKTtcblxuICBlY2MgPSBFQVJUSF9FY2M7XG4gIGVzcSA9IGVjYyAqIGVjYztcblxuICAvLyAgICAgICAgICAgICBhcHByb3hpbWF0aW9uIGJ5IHN0YWdlc1xuICAvLyAgICAgICAgICAgICAxc3QgdXNlIGdjLWxhdCBhcyBpZiBpcyBnZCwgdGhlbiBjb3JyZWN0IGFsdCBkZXBlbmRlbmNlXG5cbiAgYWx0bm93ID0gYWx0a207XG5cbiAgcnJucm0gPSByYWRjdXIoZmxhdGdjKTtcbiAgcm4gPSBycm5ybVsxXTtcblxuICByYXRpbyA9IDEgLSBlc3EgKiBybiAvIChybiArIGFsdG5vdyk7XG5cbiAgdGxhdCA9IE1hdGgudGFuKGR0ciAqIGZsYXRnYykgLyByYXRpbztcbiAgZmxhdGdkID0gcnRkICogTWF0aC5hdGFuKHRsYXQpO1xuXG4gIC8vICAgICAgICBub3cgdXNlIHRoaXMgYXBwcm94aW1hdGlvbiBmb3IgZ2QtbGF0IHRvIGdldCBybiBldGMuXG5cbiAgcnJucm0gPSByYWRjdXIoZmxhdGdkKTtcbiAgcm4gPSBycm5ybVsxXTtcblxuICByYXRpbyA9IDEgLSBlc3EgKiBybiAvIChybiArIGFsdG5vdylcbiAgdGxhdCA9IE1hdGgudGFuKGR0ciAqIGZsYXRnYykgLyByYXRpbztcbiAgZmxhdGdkID0gcnRkICogTWF0aC5hdGFuKHRsYXQpO1xuXG4gIHJldHVybiBmbGF0Z2RcblxufVxuXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuZnVuY3Rpb24gZ2QyZ2MoZmxhdGdkaSwgYWx0a21pKVxuXG4vKiAgICAgICAgZ2VvZGV0aWMgbGF0aXR1ZGUgdG8gZ2VvY2VudHJpYyBsYXRpdHVkZVxuXG4gICAgIElucHV0OlxuICAgICAgICAgICAgICAgZmxhdGdkICAgIGdlb2RldGljIGxhdGl0dWRlIGRlZy5cbiAgICAgICAgICAgICAgIGFsdGttICAgICBhbHRpdGlkZSBpbiBrbVxuICAgICBvdXB1dDpcbiAgICAgICAgICAgICAgIGZsYXRnYyAgICBnZW9jZW50cmljIGxhdGl0dWRlIGluIGRlZ1xuXG4qL1xuXG57XG5cbiAgdmFyIGR0ciA9IE1hdGguUEkgLyAxODAuMDtcbiAgdmFyIHJ0ZCA9IDEgLyBkdHI7XG5cbiAgdmFyIGZsYXRnYywgZmxhdGdkLCBhbHRrbVxuICB2YXIgcnJucm0gPSBuZXcgQXJyYXkoMylcbiAgdmFyIHJlLCBybiwgZWNjLCBlc3E7XG4gIHZhciBzbGF0LCBjbGF0LCB0bGF0XG4gIHZhciBhbHRub3csIHJhdGlvXG5cbiAgZ2VvZEdCTCgpO1xuXG4gIGZsYXRnZCA9IE51bWJlcihmbGF0Z2RpKTtcbiAgYWx0a20gPSBOdW1iZXIoYWx0a21pKTtcblxuICBlY2MgPSBFQVJUSF9FY2M7XG4gIGVzcSA9IGVjYyAqIGVjYztcblxuICBhbHRub3cgPSBhbHRrbTtcblxuICBycm5ybSA9IHJhZGN1cihmbGF0Z2QpO1xuICBybiA9IHJybnJtWzFdO1xuXG4gIHJhdGlvID0gMSAtIGVzcSAqIHJuIC8gKHJuICsgYWx0bm93KTtcblxuICB0bGF0ID0gTWF0aC50YW4oZHRyICogZmxhdGdkKSAqIHJhdGlvO1xuICBmbGF0Z2MgPSBydGQgKiBNYXRoLmF0YW4odGxhdCk7XG5cbiAgcmV0dXJuIGZsYXRnYztcblxufVxuXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIGxsZW51KGZsYXRpLCBmbG9uaSlcblxuLyogICAgICAgIGxhdGl0dWRlIGxvbmdpdHVkZSB0byBlYXN0LG5vcnRoLHVwIHVuaXQgdmVjdG9yc1xuXG4gICAgIGlucHV0OlxuICAgICAgICAgICAgICAgZmxhdCAgICAgIGxhdGl0dWRlIGluIGRlZ2VlcyBOXG4gICAgICAgICAgICAgICAgICAgICAgICAgWyBnYyAtPiBnYyBlbnUsICBnZCB1c3VhbCBlbnUgXVxuICAgICAgICAgICAgICAgZmxvbiAgICAgIGxvbmdpdHVkZSBpbiBkZWdyZWVzIEVcbiAgICAgb3V0cHV0OlxuICAgICAgICAgICAgICAgZW51WzNbM11dICBwYWNrZWQgMy11bml0IHZlY3RvcnMgLyBlYWNoIGEgMyB2ZWN0b3JcblxuKi9cblxue1xuXG4gIHZhciBmbGF0LCBmbG9uO1xuICB2YXIgZHRyLCBjbGF0LCBzbGF0LCBjbG9uLCBzbG9uO1xuICB2YXIgZWUgPSBuZXcgQXJyYXkoMyk7XG4gIHZhciBlbiA9IG5ldyBBcnJheSgzKTtcbiAgdmFyIGV1ID0gbmV3IEFycmF5KDMpO1xuXG4gIHZhciBlbnUgPSBuZXcgQXJyYXkoMyk7XG5cbiAgdmFyIGR0ciA9IE1hdGguUEkgLyAxODAuMFxuXG5cbiAgLy8gICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBmbGF0ID0gTnVtYmVyKGZsYXRpKTtcbiAgZmxvbiA9IE51bWJlcihmbG9uaSk7XG5cbiAgY2xhdCA9IE1hdGguY29zKGR0ciAqIGZsYXQpO1xuICBzbGF0ID0gTWF0aC5zaW4oZHRyICogZmxhdCk7XG4gIGNsb24gPSBNYXRoLmNvcyhkdHIgKiBmbG9uKTtcbiAgc2xvbiA9IE1hdGguc2luKGR0ciAqIGZsb24pO1xuXG4gIGVlWzBdID0gLXNsb247XG4gIGVlWzFdID0gY2xvbjtcbiAgZWVbMl0gPSAwLjA7XG5cbiAgZW5bMF0gPSAtY2xvbiAqIHNsYXQ7XG4gIGVuWzFdID0gLXNsb24gKiBzbGF0O1xuICBlblsyXSA9IGNsYXQ7XG5cbiAgZXVbMF0gPSBjbG9uICogY2xhdDtcbiAgZXVbMV0gPSBzbG9uICogY2xhdDtcbiAgZXVbMl0gPSBzbGF0O1xuXG4gIGVudVswXSA9IGVlO1xuICBlbnVbMV0gPSBlbjtcbiAgZW51WzJdID0gZXU7XG5cbiAgcmV0dXJuIGVudTtcblxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiB4eXpsbGgoeHZlYylcblxuLyogICAgICAgIHh5eiB2ZWN0b3IgIHRvICBsYXQsbG9uLGhlaWdodFxuXG4gICAgIGlucHV0OlxuICAgICAgICAgIHh2ZWNbM10gICB4eXogRUNFRiBsb2NhdGlvblxuICAgICBvdXRwdXQ6XG5cbiAgICAgICAgICBsbGh2ZWNbM10gd2l0aCBjb21wb25lbnRzXG5cbiAgICAgICAgICBmbGF0ICAgICAgZ2VvZGV0aWMgbGF0aXR1ZGUgaW4gZGVnXG4gICAgICAgICAgZmxvbiAgICAgIGxvbmdpdHVkZSBpbiBkZWdcbiAgICAgICAgICBhbHRrbSAgICAgYWx0aXR1ZGUgaW4ga21cblxuKi9cblxue1xuXG4gIHZhciBkdHIgPSBNYXRoLlBJIC8gMTgwLjA7XG4gIHZhciBmbGF0Z2MsIGZsYXRuLCBkbGF0O1xuICB2YXIgcm5vdywgcnA7XG4gIHZhciB4LCB5LCB6LCBwO1xuICB2YXIgdGFuZ2MsIHRhbmdkO1xuXG4gIHZhciB0ZXN0dmFsLCBrb3VudDtcblxuICB2YXIgcm4sIGVzcTtcbiAgdmFyIGNsYXQsIHNsYXQ7XG4gIHZhciBycm5ybSA9IG5ldyBBcnJheSgzKTtcblxuICB2YXIgZmxhdCwgZmxvbiwgYWx0a207XG4gIHZhciBsbGh2ZWMgPSBuZXcgQXJyYXkoMyk7XG5cblxuICBnZW9kR0JMKCk7XG5cbiAgZXNxID0gRUFSVEhfRXNxO1xuXG4gIHggPSB4dmVjWzBdO1xuICB5ID0geHZlY1sxXTtcbiAgeiA9IHh2ZWNbMl07XG5cbiAgeCA9IE51bWJlcih4KTtcbiAgeSA9IE51bWJlcih5KTtcbiAgeiA9IE51bWJlcih6KTtcblxuICBycCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuXG4gIGZsYXRnYyA9IE1hdGguYXNpbih6IC8gcnApIC8gZHRyO1xuXG4gIHRlc3R2YWwgPSBNYXRoLmFicyh4KSArIE1hdGguYWJzKHkpO1xuICBpZiAodGVzdHZhbCA8IDEuMGUtMTApIHtcbiAgICBmbG9uID0gMC4wXG4gIH0gZWxzZSB7XG4gICAgZmxvbiA9IE1hdGguYXRhbjIoeSwgeCkgLyBkdHJcbiAgfVxuICBpZiAoZmxvbiA8IDAuMCkge1xuICAgIGZsb24gPSBmbG9uICsgMzYwLjBcbiAgfVxuXG4gIHAgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG5cbiAgLy8gICAgICAgICAgICAgb24gcG9sZSBzcGVjaWFsIGNhc2VcblxuICBpZiAocCA8IDEuMGUtMTApIHtcbiAgICBmbGF0ID0gOTAuMFxuICAgIGlmICh6IDwgMC4wKSB7XG4gICAgICBmbGF0ID0gLTkwLjBcbiAgICB9XG5cbiAgICBhbHRrbSA9IHJwIC0gcmVhcnRoKGZsYXQpO1xuICAgIGxsaHZlY1swXSA9IGZsYXQ7XG4gICAgbGxodmVjWzFdID0gZmxvbjtcbiAgICBsbGh2ZWNbMl0gPSBhbHRrbTtcblxuICAgIHJldHVybiBsbGh2ZWM7XG4gIH1cblxuICAvLyAgICAgICAgZmlyc3QgaXRlcmF0aW9uLCB1c2UgZmxhdGdjIHRvIGdldCBhbHRpdHVkZSBcbiAgLy8gICAgICAgIGFuZCBhbHQgbmVlZGVkIHRvIGNvbnZlcnQgZ2MgdG8gZ2QgbGF0LlxuXG4gIHJub3cgPSByZWFydGgoZmxhdGdjKTtcbiAgYWx0a20gPSBycCAtIHJub3c7XG4gIGZsYXQgPSBnYzJnZChmbGF0Z2MsIGFsdGttKTtcblxuICBycm5ybSA9IHJhZGN1cihmbGF0KTtcbiAgcm4gPSBycm5ybVsxXTtcblxuICBmb3IgKHZhciBrb3VudCA9IDA7IGtvdW50IDwgNTsga291bnQrKykge1xuICAgIHNsYXQgPSBNYXRoLnNpbihkdHIgKiBmbGF0KTtcbiAgICB0YW5nZCA9ICh6ICsgcm4gKiBlc3EgKiBzbGF0KSAvIHA7XG4gICAgZmxhdG4gPSBNYXRoLmF0YW4odGFuZ2QpIC8gZHRyO1xuXG4gICAgZGxhdCA9IGZsYXRuIC0gZmxhdDtcbiAgICBmbGF0ID0gZmxhdG47XG4gICAgY2xhdCA9IE1hdGguY29zKGR0ciAqIGZsYXQpO1xuXG4gICAgcnJucm0gPSByYWRjdXIoZmxhdCk7XG4gICAgcm4gPSBycm5ybVsxXTtcblxuICAgIGFsdGttID0gKHAgLyBjbGF0KSAtIHJuO1xuXG4gICAgaWYgKE1hdGguYWJzKGRsYXQpIDwgMS4wZS0xMikge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgfVxuXG4gIGxsaHZlY1swXSA9IGZsYXQ7XG4gIGxsaHZlY1sxXSA9IGZsb247XG4gIGxsaHZlY1syXSA9IGFsdGttO1xuXG4gIHJldHVybiBsbGh2ZWM7XG5cbn0iLCJ2YXIgdmlld2VyID0gbmV3IENlc2l1bS5WaWV3ZXIoJ2Nlc2l1bUNvbnRhaW5lcicsIHtcblxuICBmdWxsc2NyZWVuQnV0dG9uOiBmYWxzZSxcbiAgYmFzZUxheWVyUGlja2VyOiBmYWxzZSxcbiAgdGltZWxpbmU6IGZhbHNlLFxuICBob21lQnV0dG9uOiBmYWxzZSxcbiAgaW5mb0JveGU6IGZhbHNlLFxuICBuYXZpZ2F0aW9uSGVscEJ1dHRvbjogZmFsc2UsXG4gIHNlbGVjdGlvbkluZGljYXRvcjogZmFsc2UsXG4gIHZyQnV0dG9uOiBmYWxzZSxcbiAgZ2VvY29kZXI6IGZhbHNlLFxuICBzY2VuZU1vZGVQaWNrZXI6IGZhbHNlLFxuICBhbmltYXRpb246IGZhbHNlLFxuICAvLyAgaW1hZ2VyeVByb3ZpZGVyOiBuZXcgQ2VzaXVtLkFyY0dpc01hcFNlcnZlckltYWdlcnlQcm92aWRlcih7XG4gIC8vICAgIHVybDogJ2h0dHA6Ly9zZXJ2ZXIuYXJjZ2lzb25saW5lLmNvbS9BcmNHSVMvcmVzdC9zZXJ2aWNlcy9Xb3JsZF9TdHJlZXRfTWFwL01hcFNlcnZlcidcbiAgLy8gIH0pXG5cbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2VzaXVtLXZpZXdlci1ib3R0b20nKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbi8vIFNBVEVMTElURVNcblxuY2xhc3Mgc2F0IHtcbiAgY29uc3RydWN0b3IobmFtZSwgaWQsIGRhdGUsIGluZm9zLCBwb3MpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmRhdGUgPSBkYXRlO1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnRydWVfcG9zID0gcG9zO1xuICAgIHRoaXMucG9zID0geHl6bGxoKHBvcyk7XG4gICAgdGhpcy5pbmZvcyA9IGluZm9zO1xuICAgIHRoaXMub2JqZWN0ID0gbmV3IENlc2l1bS5FbnRpdHkoe1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICBwb3NpdGlvbjogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKHRoaXMucG9zWzBdLCB0aGlzLnBvc1sxXSwgdGhpcy5wb3NbMl0gKiAxMDAwKSxcbiAgICAgIGVsbGlwc29pZDoge1xuICAgICAgICByYWRpaTogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDUwMDAwLjAsIDUwMDAwLjAsIDUwMDAwLjApLFxuICAgICAgICBtYXRlcmlhbDogQ2VzaXVtLkNvbG9yLlJFRCxcblxuICAgICAgfSxcbiAgICAgIGxhYmVsOiB7XG4gICAgICAgIHRleHQ6IHRoaXMubmFtZSxcbiAgICAgICAgZm9udDogJzEwcHQgYXJpYWwnLFxuICAgICAgICBzdHlsZTogQ2VzaXVtLkxhYmVsU3R5bGUuRklMTF9BTkRfT1VUTElORSxcbiAgICAgICAgb3V0bGluZVdpZHRoOiAyLFxuICAgICAgICB2ZXJ0aWNhbE9yaWdpbjogQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLkJPVFRPTSxcbiAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMigwLCAtMjUpXG4gICAgICB9XG5cbiAgICB9KTtcbiAgICB0aGlzLnBvcHVwID0gbmV3IENlc2l1bS5FbnRpdHkodGhhdC5uYW1lKTtcbiAgICB0aGlzLnBvcHVwID0ge1xuICAgICAgdGl0bGU6ICcnXG4gICAgfTtcbiAgICB0aGlzLnBvcHVwLmRlc2NyaXB0aW9uID0ge1xuICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwicG9wX3VwXCI+PGRpdiBjbGFzcz1cImV4aXRcIj48L2Rpdj48aDI+JyArIHRoYXQubmFtZSArICc8L2gyPjxwPkxhdWNoZWQgOiAnICsgdGhhdC5kYXRlICsgJzwvcD48cD4gQ291bnRyeSA6ICcgKyB0aGF0LmluZm9zLmNvdW50cnkgKyAnPC9wPjxwPiBGdW5jdGlvbiA6ICcgKyB0aGF0LmluZm9zLmRpc2NpcGxpbmUgKyAnPC9wPjxwPiBNYXNzIDogJyArIHRoYXQuaW5mb3MubWFzcyArICc8L3A+PHA+RGVzY3JpcHRpb24gOiAnICsgdGhhdC5pbmZvcy5kZXNjcmlwdGlvbiArICc8L3A+PC9kaXY+JztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZSgpIHtcbiAgICB2aWV3ZXIuZW50aXRpZXMuYWRkKHRoaXMub2JqZWN0KTtcbiAgfVxufVxuXG52YXIgc2F0ZWxsaXRlcyA9IFtdO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IHNhdHMubGVuZ3RoOyBpKyspIHtcbiAgc2F0ZWxsaXRlcy5wdXNoKG5ldyBzYXQoc2F0c1tpXS5uYW1lLCBzYXRzW2ldLmlkLCBzYXRzW2ldLmRhdGUsIHNhdHNbaV0uaW5mb3MsIHNhdHNbaV0ucG9zKSk7XG59XG5cbmNvbnNvbGUubG9nKHNhdGVsbGl0ZXMpO1xuXG4vLyBJTkZPQk9YXG5cbnZhciBoYW5kbGVyID0gbmV3IENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50SGFuZGxlcih2aWV3ZXIuc2NlbmUuY2FudmFzKTtcbmhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oZnVuY3Rpb24gKGNsaWNrKSB7XG4gIHZhciBwaWNrZWRPYmplY3QgPSB2aWV3ZXIuc2NlbmUucGljayhjbGljay5wb3NpdGlvbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2F0ZWxsaXRlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChDZXNpdW0uZGVmaW5lZChwaWNrZWRPYmplY3QpICYmIChwaWNrZWRPYmplY3QuaWQgPT0gc2F0ZWxsaXRlc1tpXS5vYmplY3QpKSB7XG4gICAgICB2aWV3ZXIuc2VsZWN0ZWRFbnRpdHkgPSBzYXRlbGxpdGVzW2ldLnBvcHVwO1xuICAgIH1cbiAgfVxufSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spO1xuXG4vLyAgU0xJREVSXG5cbnZhciBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJhbmdlLXNsaWRlclwiKTtcblxudmFyXG4gIHJhbmdlUyA9IHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT1yYW5nZV1cIiksXG4gIG51bWJlclMgPSBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9bnVtYmVyXVwiKTtcblxucmFuZ2VTLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gIGVsLm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNsaWRlMSA9IHBhcnNlRmxvYXQocmFuZ2VTWzBdLnZhbHVlKSxcbiAgICAgIHNsaWRlMiA9IHBhcnNlRmxvYXQocmFuZ2VTWzFdLnZhbHVlKTtcblxuICAgIGlmIChzbGlkZTEgPiBzbGlkZTIpIHtcbiAgICAgIFtzbGlkZTEsIHNsaWRlMl0gPSBbc2xpZGUyLCBzbGlkZTFdO1xuICAgICAgLy8gdmFyIHRtcCA9IHNsaWRlMjtcbiAgICAgIC8vIHNsaWRlMiA9IHNsaWRlMTtcbiAgICAgIC8vIHNsaWRlMSA9IHRtcDtcbiAgICB9XG5cbiAgICBudW1iZXJTWzBdLnZhbHVlID0gc2xpZGUxO1xuICAgIG51bWJlclNbMV0udmFsdWUgPSBzbGlkZTI7XG4gICAgXG4gICAgZmlsdGVyX2RhdGUoW251bWJlclNbMF0udmFsdWUsIG51bWJlclNbMV0udmFsdWVdKTtcbiAgfVxufSk7XG5cbm51bWJlclMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgZWwub25pbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbnVtYmVyMSA9IHBhcnNlRmxvYXQobnVtYmVyU1swXS52YWx1ZSksXG4gICAgICBudW1iZXIyID0gcGFyc2VGbG9hdChudW1iZXJTWzFdLnZhbHVlKTtcblxuICAgIGlmIChudW1iZXIxID4gbnVtYmVyMikge1xuICAgICAgdmFyIHRtcCA9IG51bWJlcjE7XG4gICAgICBudW1iZXJTWzBdLnZhbHVlID0gbnVtYmVyMjtcbiAgICAgIG51bWJlclNbMV0udmFsdWUgPSB0bXA7XG4gICAgfVxuXG4gICAgcmFuZ2VTWzBdLnZhbHVlID0gbnVtYmVyMTtcbiAgICByYW5nZVNbMV0udmFsdWUgPSBudW1iZXIyO1xuICAgIFxuICAgIGZpbHRlcl9kYXRlKFtyYW5nZVNbMF0udmFsdWUsIHJhbmdlU1sxXS52YWx1ZV0pO1xuICB9XG59KTtcblxuZnVuY3Rpb24gZmlsdGVyX2RhdGUoZGF0ZXMpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYXRlbGxpdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNhdF9kYXRlID0gbmV3IERhdGUoc2F0ZWxsaXRlc1tpXS5kYXRlKTtcbiAgICB2YXIgc2F0X2RhdGUgPSBzYXRfZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGlmIChkYXRlc1swXSA+IHNhdF9kYXRlIHx8IGRhdGVzWzFdIDwgc2F0X2RhdGUpIHtcbiAgICAgIHNhdGVsbGl0ZXNbaV0ub2JqZWN0LnNob3cgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSBzYXRlbGxpdGVzW2ldLm9iamVjdC5zaG93ID0gdHJ1ZTtcbiAgfVxufVxuIl19
